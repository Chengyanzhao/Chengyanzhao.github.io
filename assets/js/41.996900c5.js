(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{364:function(e,t,r){"use strict";r.r(t);var _=r(1),v=Object(_.a)({},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"content"},[e._m(0),e._v(" "),r("p",[e._v("在js中有两种比较操作符：严格比较操作符("),r("code",[e._v("===")]),e._v(",Strict Equality Comparison)，和转换类型比较运算符("),r("code",[e._v("==")]),e._v("，Abstract Equality Comparison)。"),r("br"),e._v("\n两种比较操作符在使用过程中行为差异很大，很让人摸不着头脑，特别是"),r("code",[e._v("==")]),e._v("。"),r("br"),e._v("\n对于js的行为，我们还是遵从规范，所以这篇文章就从"),r("a",{attrs:{href:"https://www.ecma-international.org/ecma-262/9.0/#sec-abstract-equality-comparison",target:"_blank",rel:"noopener noreferrer"}},[e._v("规范"),r("OutboundLink")],1),e._v("出发简要分析两种比较操作符的规则。")]),e._v(" "),e._m(1),e._v(" "),r("p",[e._v("严格比较操作符在比较时不会转换两边操作数的类型，所以"),r("a",{attrs:{href:"https://www.ecma-international.org/ecma-262/9.0/#sec-strict-equality-comparison",target:"_blank",rel:"noopener noreferrer"}},[e._v("规范"),r("OutboundLink")],1),e._v("也很清晰：")]),e._v(" "),e._m(2),e._v(" "),e._m(3),e._v(" "),e._m(4),e._v(" "),e._m(5),e._v(" "),e._m(6),e._v(" "),r("p",[e._v("虽然难以琢磨，但一切迷幻行为在规范面前都是纸老虎，下面先看"),r("a",{attrs:{href:"https://www.ecma-international.org/ecma-262/9.0/#sec-abstract-equality-comparison",target:"_blank",rel:"noopener noreferrer"}},[e._v("规范"),r("OutboundLink")],1),e._v("：")]),e._v(" "),e._m(7),e._v(" "),e._m(8),e._v(" "),r("p",[e._v("举例来说这个规则如何使用：")]),e._v(" "),e._m(9),e._v(" "),e._m(10),e._v(" "),e._m(11),e._v(" "),e._m(12),e._v(" "),e._m(13),e._v(" "),r("ol",[r("li",[r("a",{attrs:{href:"https://felix-kling.de/js-loose-comparison/",target:"_blank",rel:"noopener noreferrer"}},[e._v('JavaScript "loose" comparison step by step'),r("OutboundLink")],1),e._v("："),r("code",[e._v("==")]),e._v("运算可视化。")])]),e._v(" "),e._m(14),e._v(" "),r("ol",[r("li",[r("a",{attrs:{href:"http://www.ecma-international.org/ecma-262/5.1/#sec-11.9.3",target:"_blank",rel:"noopener noreferrer"}},[e._v("ECMAScript Language Specification - ECMA-262 Edition 5.1"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Equality_comparisons_and_sameness",target:"_blank",rel:"noopener noreferrer"}},[e._v("JavaScript 中的相等性判断 - JavaScript | MDN"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Comparison_Operators",target:"_blank",rel:"noopener noreferrer"}},[e._v("比较操作符 - JavaScript | MDN"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.zhihu.com/question/29615998",target:"_blank",rel:"noopener noreferrer"}},[e._v("javascript: [] == ![]; // true 答案为什么会是true? - 知乎"),r("OutboundLink")],1)])])])},[function(){var e=this.$createElement,t=this._self._c||e;return t("h1",{attrs:{id:"浅析比较操作符-与"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#浅析比较操作符-与","aria-hidden":"true"}},[this._v("#")]),this._v(" 浅析比较操作符 ==与===")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"严格比较操作符"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#严格比较操作符","aria-hidden":"true"}},[this._v("#")]),this._v(" 严格比较操作符"),t("code",[this._v("===")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("img",{attrs:{src:"https://i.loli.net/2019/12/17/JKAxXdONz9Gh2gm.png",alt:"比较操作符_p2.png"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("对于表达式"),t("code",[this._v("x === y")]),this._v("来说，规范可总结如下：")])},function(){var e=this.$createElement,t=this._self._c||e;return t("ol",[t("li",[this._v("若x与y的类型不同，返回false。")]),this._v(" "),t("li",[this._v("若x或y任意一个值为NaN，返回false。")]),this._v(" "),t("li",[this._v("x与y分别为+0、-0时依然返回true。")]),this._v(" "),t("li",[this._v("类型相同的两个对象，由于引用不同，返回false。")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"规则"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#规则","aria-hidden":"true"}},[this._v("#")]),this._v(" "),t("code",[this._v("==")]),this._v("规则")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("虽然在实际开发中并不推荐使用"),t("code",[this._v("==")]),this._v("，但它依然是JavaScript的语法，所以即使不用，也需要了解它。"),t("br"),this._v(" "),t("code",[this._v("==")]),this._v("操作符在比较时，若两个操作数类型不同，会先被执行隐式的类型转换，而且比较规范也很复杂，所以它的结果很容易让人捉摸不透，这也是为什么在实际开发中不推荐使用的原因。")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("img",{attrs:{src:"https://i.loli.net/2019/12/16/tQJhubWS4T1VjOK.png",alt:"比较操作符_p1.png"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("在执行"),t("code",[this._v("x == y")]),this._v("表达式时，实际上是对规范进行"),t("strong",[this._v("递归匹配")]),this._v("，直到得到结果。")])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ol",[r("li",[r("code",[e._v("42 == undefined")]),e._v(" "),r("ul",[r("li",[e._v("对于这个表达式来说，上面9个规则都不匹配，则坠落至规则10，也就是return false")])])]),e._v(" "),r("li",[r("code",[e._v("[0] == false")]),e._v(" "),r("ul",[r("li",[e._v("首先匹配规则7，表达式变为"),r("code",[e._v("[0] == 0")]),e._v("。("),r("code",[e._v("ToNumber(false) => 0")]),e._v(")")]),e._v(" "),r("li",[e._v("然后匹配规则9，表达式变为"),r("code",[e._v('"0" == 0')]),e._v("。("),r("code",[e._v("[0].values() => Array Iterator {}")]),e._v(" -> "),r("code",[e._v('[0].toString() => "0"')]),e._v(")")]),e._v(" "),r("li",[e._v("然后匹配规则5，表达式变为"),r("code",[e._v("0 == 0")]),e._v("。")]),e._v(" "),r("li",[e._v("类型相同，走"),r("code",[e._v("===")]),e._v("规则，返回true。")])])]),e._v(" "),r("li",[r("code",[e._v("[] == []")]),e._v(" "),r("ul",[r("li",[e._v("两个操作数都是"),r("code",[e._v("Object")]),e._v("类型，类型相同，所以匹配"),r("code",[e._v("===")]),e._v("规则。")]),e._v(" "),r("li",[e._v("由于两个对象的引用不同，所以结果为"),r("code",[e._v("false")]),e._v("。")])])]),e._v(" "),r("li",[r("code",[e._v("[] == ![]")]),e._v(" "),r("ul",[r("li",[e._v("先计算右侧表达式，结果为"),r("code",[e._v("[] == false")])]),e._v(" "),r("li",[e._v("匹配"),r("code",[e._v("==")]),e._v("规则7，结果为"),r("code",[e._v("[] == 0")]),e._v("。(ToPrimitive=> "),r("code",[e._v("[].valueOf() == 0")]),e._v(" => "),r("code",[e._v("[] == 0")]),e._v(","),r("code",[e._v("[].toString() == 0")]),e._v(" => "),r("code",[e._v('"" == 0')]),e._v(")")]),e._v(" "),r("li",[e._v("匹配"),r("code",[e._v("==")]),e._v("规则8，结果为"),r("code",[e._v('"" == 0')]),e._v("。(ToNumber=> "),r("code",[e._v("0 == 0")]),e._v(")")]),e._v(" "),r("li",[e._v("匹配"),r("code",[e._v("==")]),e._v("规则5，结果为"),r("code",[e._v("0 == 0")])]),e._v(" "),r("li",[e._v("返回true。")])])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"总结"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#总结","aria-hidden":"true"}},[this._v("#")]),this._v(" 总结")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("看到这里相信你已经明白了"),t("code",[this._v("==")]),this._v("的运算规则，可以按照规范推导结果，但我依然不推荐在实际工作中使用它。"),t("br"),this._v("\n另外，要完全"),t("code",[this._v("==")]),this._v("的规范很难，所以这里稍微简化一下：")])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ol",[r("li",[e._v("两个操作数类型相同时，按"),r("code",[e._v("===")]),e._v("匹配。")]),e._v(" "),r("li",[e._v("若两个操作数类型不同，其中一个为"),r("code",[e._v("Boolean")]),e._v("类型时，先将"),r("code",[e._v("Boolean")]),e._v("类型转化为"),r("code",[e._v("Number")]),e._v("类型，再进行下一步比较。")]),e._v(" "),r("li",[r("code",[e._v("Number")]),e._v("类型与其他类型比较，先会将其他类型转换为"),r("code",[e._v("Number")]),e._v("，在进行比较。")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"工具"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#工具","aria-hidden":"true"}},[this._v("#")]),this._v(" 工具")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"reference"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#reference","aria-hidden":"true"}},[this._v("#")]),this._v(" reference")])}],!1,null,null,null);t.default=v.exports}}]);