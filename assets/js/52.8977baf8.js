(window.webpackJsonp=window.webpackJsonp||[]).push([[52],{353:function(t,s,a){"use strict";a.r(s);var n=a(1),e=Object(n.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"content"},[a("h1",{attrs:{id:"web安全之xss-一"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#web安全之xss-一","aria-hidden":"true"}},[t._v("#")]),t._v(" Web安全之XSS(一)")]),t._v(" "),a("ol",[a("li",[t._v("简述 什么是xss")]),t._v(" "),a("li",[t._v("一句话概述；例子 demo")]),t._v(" "),a("li",[t._v("解决方案之1.2.3.4")]),t._v(" "),a("li",[t._v("与csrf的区别。")])]),t._v(" "),a("h2",{attrs:{id:"什么是xss"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#什么是xss","aria-hidden":"true"}},[t._v("#")]),t._v(" 什么是XSS")]),t._v(" "),a("p",[t._v("维基百科是这样描述XSS的：")]),t._v(" "),a("blockquote",[a("p",[t._v("跨站脚本（英语：Cross-site scripting，通常简称为：XSS）是一种网站应用程序的安全漏洞攻击，是代码注入的一种。它允许恶意用户将代码注入到网页上，其他用户在观看网页时就会受到影响。"),a("em",[t._v("这类攻击通常包含了HTML以及用户端脚本语言")]),t._v("。\nXSS攻击通常指的是通过利用网页开发时留下的漏洞，通过巧妙的方法注入恶意指令代码到网页，使用户加载并执行攻击者恶意制造的网页程序。")])]),t._v(" "),a("h2",{attrs:{id:"一个xss攻击的例子"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一个xss攻击的例子","aria-hidden":"true"}},[t._v("#")]),t._v(" 一个XSS攻击的例子")]),t._v(" "),a("p",[t._v("假设有一个带有评论功能的网站A，用户登陆后可发表自己的评论。")]),t._v(" "),a("p",[t._v("一个攻击者X，在评论区写了下面的内容，并发表：")]),t._v(" "),a("div",{staticClass:"language-html extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[t._v("这个提示框关不掉的!"),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{attrs:{class:"token script"}},[a("span",{attrs:{class:"token language-javascript"}},[a("span",{attrs:{class:"token keyword"}},[t._v("while")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token boolean"}},[t._v("true")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("alert")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'别白费力气了，真的关不掉。'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")])])]),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),a("p",[t._v("此时上面的输入被服务器直接存储，用户再打开网页时，网站A想要展示这些评论，写下了如下代码：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" badCommit "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token template-string"}},[a("span",{attrs:{class:"token string"}},[t._v("`这个提示框关不掉的!<script>while (true) { alert('别白费力气了，真的关不掉。') }<\/script>`")])]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" commitList "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" userId"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{attrs:{class:"token string"}},[t._v("'aaa'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" text"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("badCommit "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\ncommitList"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("forEach")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token parameter"}},[t._v("item")]),a("span",{attrs:{class:"token operator"}},[t._v("=>")]),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" p "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("createElement")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'p'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  p"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("innerHTML "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" item"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("text\n  document"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("appendChild")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("p"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("此时网站以为它只是把用户的评论展示出来，实际上网站将攻击者的script脚本插入到网页中，所有访问到这个网页的用户都会执行这段恶意代码，攻击者也就达到了攻击的目的。")]),t._v(" "),a("p",[t._v("如果只是这样，那仅仅是恶作剧，但也影响了网站的正常运行。如果攻击者写了一段窃取cookie等敏感信息的脚本，并发送到攻击者自己的服务器上，不仅用户信息泄漏，攻击者还可以利用这些信息(如cookie)伪装成用户向服务器发起请求，那这个攻击就进入了下一阶段：CSRF。")]),t._v(" "),a("h2",{attrs:{id:"如何防御"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如何防御","aria-hidden":"true"}},[t._v("#")]),t._v(" 如何防御")]),t._v(" "),a("p",[t._v("目前的很多浏览器都已默认开启XSS过滤器，避免这种注入脚本的情况发生。如果您copy上面的代码自己模拟XSS攻击，在chrome上运行时会发现这不会成功，因为chrome识别到插入script标签")]),t._v(" "),a("h2",{attrs:{id:"xss与csrf的区别"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#xss与csrf的区别","aria-hidden":"true"}},[t._v("#")]),t._v(" XSS与CSRF的区别")]),t._v(" "),a("p",[t._v("CSRF主要特点是攻击者伪装成用户发起请求。XSS实则并没有向网站的服务器发起请求，而只是窃取信息，或者将信息发送之攻击者自己的服务器上。")])])}],!1,null,null,null);s.default=e.exports}}]);